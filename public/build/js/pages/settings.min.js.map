{"version":3,"names":[],"mappings":"","sources":["js/pages/settings.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n\r\n    getBtn();\r\n});\r\n\r\nfunction getBtn() {\r\n    const dropAccountBtn = document.getElementById(\"dropAccount-btn\") || null;\r\n    if (!dropAccountBtn) return;\r\n\r\n    dropAccountBtn.addEventListener(\"click\", dropAccount);\r\n}\r\n\r\nfunction dropAccount() {\r\n    // show modal\r\n    generateModal();\r\n}\r\n\r\nfunction generateModal() {\r\n    const body = document.body;\r\n\r\n    const modal = document.createElement(\"DIV\")\r\n    modal.classList.add(\"modal\");\r\n    modal.classList.add('show');\r\n    modal.id = \"modal\";\r\n\r\n    // btn to close the modal\r\n    const closeModalBtn = document.createElement(\"BUTTON\");\r\n    closeModalBtn.classList.add(\"close-modal\");\r\n    closeModalBtn.textContent = \"x\";\r\n    closeModalBtn.addEventListener(\"click\", deleteModal);\r\n    // title\r\n    const title = document.createElement(\"H3\");\r\n    title.textContent = \"¿Está seguro de que desea borrar la cuenta?\";\r\n    // drop account btn\r\n    const deleteAccountBtn = document.createElement(\"BUTTON\");\r\n    deleteAccountBtn.classList.add(\"update-button\");\r\n    deleteAccountBtn.classList.add(\"delete-button\");\r\n    deleteAccountBtn.textContent = \"Elimnar cuenta\";\r\n    deleteAccountBtn.addEventListener(\"click\", deleteAccount);\r\n\r\n    // modal content\r\n    const modalContent = document.createElement(\"DIV\");\r\n    modalContent.classList.add(\"modal-content\");\r\n    modalContent.append(closeModalBtn, title, deleteAccountBtn)\r\n\r\n\r\n    modal.appendChild(modalContent);\r\n\r\n    // Close when clicking outside\r\n    modal.addEventListener('click', (event) => {\r\n        if (event.target === modal) deleteModal();\r\n    });\r\n\r\n    // append model\r\n    body.appendChild(modal);\r\n\r\n\r\n    function deleteModal() {\r\n        modal.remove();\r\n    }\r\n}\r\n\r\n\r\nasync function deleteAccount() {\r\n    const URL = `${location.origin}/home/delete-account`;\r\n    const result = await fetch(URL, { method: \"POST\" });\r\n    const data = await result.json();\r\n    if (data.result) {\r\n        window.location = \"/logout\";\r\n    } else {\r\n        // send to /home\r\n        window.location = \"/home\";\r\n    }\r\n}"],"file":"settings.min.js"}